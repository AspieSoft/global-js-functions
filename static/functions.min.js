var Global={};function toNumber(str){return"number"==typeof str?str:(str=str.toString().replace(/[^0-9.]/g,"").split(".",2).join(".").trim())&&""!==str&&"."!==str?(str.startsWith(".")&&(str="0"+str),str.endsWith(".")&&(str=str.substring(0,str.lastIndexOf("."))),Number(str)):NaN}"object"==typeof global?Global=global:"object"==typeof window&&(Global=window),Object.map=function(obj,callback){let result={},keys=Object.keys(obj);for(let i=0;i<keys.length;i++){let r=callback(obj[keys[i]],keys[i],obj);r===undefined&&(result[keys[i]]=obj[keys[i]]),null!==r&&(result[keys[i]]=r)}return result},Object.forEach=function(obj,callback){let keys=Object.keys(obj);for(let i=0;i<keys.length;i++)callback(obj[keys[i]],keys[i],obj)},Object.forEachAsync=function(obj,callback){let keys=Object.keys(obj);for(let i=0;i<keys.length;i++)setTimeout(async()=>{callback(obj[keys[i]],keys[i],obj)},0)},Object.forEachSyncAsync=async function(obj,callback,{timeout=1e3,checkInterval=10}){let keys=Object.keys(obj),finishedItems=0;return Object.forEachAsync(obj,async(item,key)=>{await callback(item,key,obj),finishedItems++}),await waitForValue(()=>finishedItems>=keys.length,timeout,checkInterval),finishedItems>=keys.length},Object.clone=function(obj){return{...obj}},Object.toArray=function(obj,keepKeys){let result=[],keys=Object.keys(obj);if("array"===keepKeys)for(let i=0;i<keys.length;i++)result.push([keys[i],obj[keys[i]]]);else if("string"===keepKeys)for(let i=0;i<keys.length;i++)result.push(keys[i]+" => "+obj[keys[i]].toString());else for(let i=0;i<keys.length;i++)result.push(obj[keys[i]]);return result},Array.forEach=function(arr,callback){for(let i=0;i<arr.length;i++)callback(arr[i],i,arr)},Array.forEachAsync=function(arr,callback){for(let i=0;i<arr.length;i++)setTimeout(async()=>{callback(arr[i],i,arr)},0)},Array.forEachSyncAsync=async function(arr,callback,{timeout=1e3,checkInterval=10}){let finishedItems=0;return Array.forEachAsync(arr,async(item,key)=>{await callback(item,key,arr),finishedItems++}),await waitForValue(()=>finishedItems>=arr.length,timeout,checkInterval),finishedItems>=arr.length},Array.clone=function(arr){return[...arr]},Array.toObject=function(arr){return{...arr}},Global.forEach=function forEach(arr,callback){return"object"==typeof arr?Object.forEach(arr,callback):Array.isArray(arr)?Array.forEach(arr,callback):"string"==typeof arr||"number"==typeof arr||"boolean"==typeof arr?Array.forEach([arr],callback):undefined},Global.forEachAsync=async function forEachAsync(arr,callback,options){return"object"==typeof arr?options&&options.sync?await Object.forEachSyncAsync(arr,callback,options):Object.forEachAsync(arr,callback):Array.isArray(arr)?options&&options.sync?await Array.forEachSyncAsync(arr,callback,options):Array.forEachAsync(arr,callback):"string"==typeof arr||"number"==typeof arr||"boolean"==typeof arr?options&&options.sync?await Array.forEachSyncAsync([arr],callback,options):Array.forEachAsync([arr],callback):undefined},Function.toFunction=function(func){return()=>func},Function.clone=function(func){let newFunc=new Function("return "+func.toString())();for(let key in func)newFunc[key]=func[key];return newFunc},Global.toNumber=toNumber,Global.toInteger=function toInteger(str){return"number"==typeof str?Math.floor(str):(str=str.toString().replace(/[^0-9.]/g,"").split(".",1)[0].trim())&&""!==str?Number(str):NaN},Global.toTimeMillis=function toTimeMillis(str){return"number"==typeof str?Number(str):str&&"string"==typeof str&&""!==str.trim()?str.endsWith("h")?36e5*toNumber(str):str.endsWith("m")?6e4*toNumber(str):str.endsWith("s")?1e3*toNumber(str):str.endsWith("D")?864e5*toNumber(str):str.endsWith("M")?2628e6*toNumber(str):str.endsWith("Y")?31536e6*toNumber(str):str.endsWith("DE")?31536e7*toNumber(str):this.endsWith("CE")||str.endsWith("C")?31536e8*toNumber(str):str.endsWith("ms")?toNumber(str):str.endsWith("us")||this.endsWith("mic")?.001*toNumber(str):str.endsWith("ns")?1e-6*toNumber(str):toNumber(str):NaN},Global.sNum=function sNum(number){return 1===toNumber(number)?"":"s"},RegExp.escape=function(str){return str.toString().replace(/([^A-Za-z0-9_])/g,"\\$1")},String.reverse=function(str,separator=""){return str.split(separator).reverse().join(separator)},String.replaceAll=function(str,search,replace){return search=RegExp.escape(search),str.replace(new RegExp("("+RegExp.escape(search)+")","g"),replace.toString())},String.replaceLast=function(str,search,replace){return search=RegExp.escape(search),str.replace(new RegExp("("+search+")(?!.*"+search+")"),replace.toString())},JSON.normalizeStr=function(str){return str.replace(/"?([\w_\- ]+)"?\s*?:\s*?"?(.*?)"?\s*?([,}\]])/gis,(str,index,item,end)=>{if(index=index.replace(/"/gis,"").trim(),item=item.replace(/"/gis,"").trim(),!index||!item||""===index||""===item)return end;index='"'+index+'"';let itemN=toNumber(item);return!itemN&&0!==itemN||""===itemN?"true"!==item&&"false"!==item&&(item='"'+item+'"'):item=itemN,index+":"+item+end}).replace(/,\s*?([}\]])/gis,"$1")},Math.sum=function(start,end,callback){let answer=0;if((start=start.toInteger())<=(end=end.toInteger()))for(let i=start;i<=end;i++)answer+=callback(i);else for(let i=start;i>=end;i--)answer+=callback(i);return answer},Math.factorial=function(n){return 0===n?1:n<0?NaN:n*Math.factorial(n-1)},HTML={escape:function(str){return str.toString().replace(/&(?!(amp|gt|lt|quot|apos|grave|ast|percnt|dollar|cent|euro|pound);)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/`/g,"&grave;").replace(/\*/g,"&ast;").replace(/%/g,"&percnt;").replace(/\$/g,"&dollar;").replace(/&dollar;c/g,"&cent;").replace(/&dollar;e/g,"&euro;").replace(/&dollar;p/g,"&pound;").replace(/&lt;\[=\]/g,"&le;").replace(/&gt;\[=\]/g,"&ge;").replace(/=\[!\]/g,"&ne;").replace(/=\[?\]/g,"&asymp;").replace(/&lt;&lt;/g,"&laquo;").replace(/&gt;&gt;/g,"&raquo;").replace(/\+-/g,"&plusmn;")},unescape:function(str){return str.toString().replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&grave;/g,"`").replace(/&ast;/g,"*").replace(/&percnt;/g,"%").replace(/&dollar;/g,"$").replace(/&cent;/g,"$c").replace(/&euro;/g,"$e").replace(/&pound;/g,"$p").replace(/&le;/g,"<[=]").replace(/&ge;/g,">[=]").replace(/&ne;/g,"=[!]").replace(/&asymp;/g,"=[?]").replace(/&laquo;/g,"<<").replace(/&raquo;/g,">>").replace(/&plusmn;/g,"+-")},strip_tags:function(str,keep=!1,stripParams=!0){return keep=keep&&Array.isArray(keep)?"|"+keep.map(k=>RegExp.escape(k)).join("|"):keep&&""!==keep.trim?"|"+RegExp.escape(keep):"",str=str.replace(new RegExp("</?(?![^A-Za-z0-9_-]"+keep+").*?>","g"),""),stripParams&&(str=str.replace(/<((?:[A-Za-z0-9_\-])).*?>/g,"<$1>")),str},strip_params:function(str){return str.replace(/<((?:[A-Za-z0-9_\-])).*?>/g,"<$1>")}},Global.HTML=HTML;const sleep=ms=>new Promise(resolve=>setTimeout(resolve,ms));async function waitForValue(value,timeout=3e3,checkInterval=10){if("function"==typeof value){value()&&value();let loops=0;for(;!(value()||(await sleep(checkInterval),loops++,loops>=timeout/checkInterval)););return value()}return console.error("TypeError: waitForValue expects a function with a return value"),!1}Global.sleep=sleep,Global.waitForValue=waitForValue,Global.generateRandomToken=function generateRandomToken(){return Math.random().toString(36).substr(2)+Math.random().toString(36).substr(2)};